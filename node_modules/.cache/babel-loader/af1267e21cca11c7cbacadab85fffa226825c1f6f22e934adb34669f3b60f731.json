{"ast":null,"code":"// App.tsx\nimport React,{useState,useEffect}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL='http://localhost:3000/api';function App(){var _decodificarBarcode;const[unidades,setUnidades]=useState([]);const[productos,setProductos]=useState([]);const[tiposQueso,setTiposQueso]=useState([]);const[showForm,setShowForm]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[loading,setLoading]=useState(false);// Form state\nconst[codigoBarras,setCodigoBarras]=useState('');const[productoSeleccionado,setProductoSeleccionado]=useState(null);const[observacionesIngreso,setObservacionesIngreso]=useState('');const[observacionesCorte,setObservacionesCorte]=useState('');const[codigoBarrasCorte,setCodigoBarrasCorte]=useState('');// Agregar estos estados al inicio del componente\nconst[filtroInventario,setFiltroInventario]=useState('');const[busquedaObservaciones,setBusquedaObservaciones]=useState(false);// Historial state\nconst[showHistorial,setShowHistorial]=useState(false);const[historialUnidades,setHistorialUnidades]=useState([]);const[filtroHistorial,setFiltroHistorial]=useState('todos');const[busquedaHistorial,setBusquedaHistorial]=useState('');// Modal state\nconst[showCutModal,setShowCutModal]=useState(false);const[unidadParaCortar,setUnidadParaCortar]=useState(null);const[pesoCorte,setPesoCorte]=useState('');const[showEditModal,setShowEditModal]=useState(false);const[unidadParaEditar,setUnidadParaEditar]=useState(null);// Agregar estos estados\nconst[fechaInicio,setFechaInicio]=useState('');const[fechaFin,setFechaFin]=useState('');const[tipoQuesoFiltro,setTipoQuesoFiltro]=useState('todos');const[precios,setPrecios]=useState({});// productoId -> precio\nuseEffect(()=>{fetchData();},[]);const fetchData=async()=>{await Promise.all([fetchUnidades(),fetchProductos(),fetchTiposQueso()]);};const fetchUnidades=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/unidades\"));const data=await response.json();setUnidades(data);}catch(error){console.error('Error al cargar unidades:',error);}};const fetchProductos=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/productos\"));const data=await response.json();setProductos(data);}catch(error){console.error('Error al cargar productos:',error);}};const fetchHistorial=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/unidades/historial\"));const data=await response.json();setHistorialUnidades(data);}catch(error){console.error('Error al cargar historial:',error);}};const fetchTiposQueso=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/tipos-queso\"));const data=await response.json();setTiposQueso(data);}catch(error){console.error('Error al cargar tipos de queso:',error);}};const decodificarBarcode=barcode=>{if(barcode.length!==13){setError('El código debe tener exactamente 13 dígitos');return null;}const plu=barcode.substring(2,7);const pesoStr=barcode.substring(7,12);const pesoGramos=parseInt(pesoStr,10);if(isNaN(pesoGramos)||pesoGramos<=0){setError('Peso inválido en código de barras');return null;}const producto=productos.find(p=>p.plu===plu);if(!producto){setError(\"No se encontr\\xF3 producto con PLU: \".concat(plu));return null;}return{producto,peso:pesoGramos};};// Agregar esta función para filtrar unidades\nconst unidadesFiltradas=unidades.filter(unidad=>{const searchLower=filtroInventario.toLowerCase();const matchNombre=unidad.producto.nombre.toLowerCase().includes(searchLower);const matchPLU=unidad.producto.plu.includes(searchLower);const matchID=unidad.id.toString().includes(searchLower);// Si está activada la búsqueda por observaciones\nif(busquedaObservaciones&&unidad.observacionesIngreso){const matchObservaciones=unidad.observacionesIngreso.toLowerCase().includes(searchLower);return matchObservaciones;}return matchNombre||matchPLU||matchID;});// Agregar función para contar unidades por producto\nconst contarUnidadesPorProducto=productoId=>{return unidades.filter(u=>u.producto.id===productoId&&u.activa).length;};// Agregar función para editar unidad\nconst handleEditUnidad=async(unidadId,nuevasObservaciones)=>{try{const response=await fetch(\"\".concat(API_URL,\"/unidades/\").concat(unidadId),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({observacionesIngreso:nuevasObservaciones})});if(response.ok){setSuccess('Unidad actualizada correctamente');await fetchUnidades();setTimeout(()=>setSuccess(''),3000);}else{const errorData=await response.json();setError(errorData.error||'Error al actualizar unidad');}}catch(error){setError('Error de conexión con el servidor');}};// Función para obtener el stock actual de un producto\nconst getStockActualProducto=productoId=>{return unidades.filter(u=>u.producto.id===productoId&&u.activa).length;};// Función para calcular cuántas unidades se agotaron de un producto\nconst getUnidadesAgotadasProducto=productoId=>{return historialUnidades.filter(u=>u.producto.id===productoId&&!u.activa).length;};// Función para calcular el peso total vendido por producto\nconst getPesoVendidoProducto=productoId=>{return historialUnidades.filter(u=>u.producto.id===productoId&&!u.activa).reduce((sum,u)=>sum+Number(u.pesoInicial),0);};const handleBarcodeCorteChange=e=>{const value=e.target.value;setCodigoBarrasCorte(value);if(value.length===13&&unidadParaCortar){const resultado=decodificarBarcode(value);if(!resultado){setError('Código de barras inválido');return;}const nuevoPeso=resultado.peso;const pesoActual=unidadParaCortar.pesoActual;if(nuevoPeso>pesoActual){setError('El peso escaneado es mayor al disponible');setPesoCorte('');return;}const corte=pesoActual-nuevoPeso;setPesoCorte(corte.toString());}};const handleBarcodeChange=e=>{const value=e.target.value;setCodigoBarras(value);setError('');setProductoSeleccionado(null);if(value.length===13){const resultado=decodificarBarcode(value);if(resultado){setProductoSeleccionado(resultado.producto);}}};const handleSubmit=async()=>{if(!codigoBarras||codigoBarras.length!==13){setError('Ingrese un código de barras válido de 13 dígitos');return;}const resultado=decodificarBarcode(codigoBarras);if(!resultado)return;setLoading(true);setError('');try{const response=await fetch(\"\".concat(API_URL,\"/unidades\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({productoId:resultado.producto.id,pesoInicial:resultado.peso,observacionesIngreso:observacionesIngreso||null})});if(response.ok){setSuccess('Unidad ingresada correctamente');setCodigoBarras('');setProductoSeleccionado(null);setObservacionesIngreso('');setShowForm(false);await fetchUnidades();setTimeout(()=>setSuccess(''),3000);}else{const errorData=await response.json();setError(errorData.error||'Error al ingresar unidad');}}catch(error){setError('Error de conexión con el servidor');}finally{setLoading(false);}};const handleOpenCutModal=unidad=>{setUnidadParaCortar(unidad);setPesoCorte('');setObservacionesCorte('');setShowCutModal(true);};const handleCut=async()=>{if(!unidadParaCortar)return;const peso=parseFloat(pesoCorte);if(isNaN(peso)||peso<0){setError('¿Confirmas el corte?');return;}setLoading(true);setError('');try{const response=await fetch(\"\".concat(API_URL,\"/unidades/\").concat(unidadParaCortar.id,\"/particiones\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({peso,observacionesCorte:observacionesCorte||'Corte sin observaciones'})});if(response.ok){setSuccess('Corte registrado');setShowCutModal(false);setCodigoBarrasCorte('');setPesoCorte('');setObservacionesCorte('');await fetchUnidades();}else{const errorData=await response.json();setError(errorData.error||'Error al cortar');}}catch(error){setError('Error de conexión');}finally{setLoading(false);}};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('es-AR',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});};const getTipoBadgeClass=tipo=>{const tipos={'blando':'badge-blando','semi-duro':'badge-semi-duro','duro':'badge-duro'};return tipos[tipo===null||tipo===void 0?void 0:tipo.toLowerCase()]||'badge-blando';};// Reemplazar la función de filtrado del historial\nconst historialFiltrado=historialUnidades.filter(unidad=>{// Filtro por estado (activos/agotados/todos)\nif(filtroHistorial==='activos'&&!unidad.activa)return false;if(filtroHistorial==='agotados'&&unidad.activa)return false;// Filtro por tipo de queso\nif(tipoQuesoFiltro!=='todos'&&unidad.producto.tipoQueso.nombre.toLowerCase()!==tipoQuesoFiltro){return false;}// Filtro por fechas\nif(fechaInicio||fechaFin){const unidadFecha=new Date(unidad.createdAt);const inicio=fechaInicio?new Date(fechaInicio):null;const fin=fechaFin?new Date(fechaFin):null;if(inicio&&unidadFecha<inicio)return false;if(fin&&unidadFecha>fin)return false;}// Filtro por búsqueda de texto\nif(busquedaHistorial){var _unidad$observaciones;const searchLower=busquedaHistorial.toLowerCase();const matchNombre=unidad.producto.nombre.toLowerCase().includes(searchLower);const matchPLU=unidad.producto.plu.includes(searchLower);const matchID=unidad.id.toString().includes(searchLower);const matchObservaciones=(_unidad$observaciones=unidad.observacionesIngreso)===null||_unidad$observaciones===void 0?void 0:_unidad$observaciones.toLowerCase().includes(searchLower);return matchNombre||matchPLU||matchID||matchObservaciones;}return true;});// Calcular estadísticas del historial con los nuevos filtros\nconst statsHistorial={total:historialFiltrado.length,activos:historialFiltrado.filter(u=>u.activa).length,agotados:historialFiltrado.filter(u=>!u.activa).length,pesoTotal:historialFiltrado.reduce((sum,u)=>sum+Number(u.pesoInicial),0),pesoVendido:historialFiltrado.reduce((sum,u)=>sum+(Number(u.pesoInicial)-Number(u.pesoActual)),0),productosDiferentes:new Set(historialFiltrado.map(u=>u.producto.id)).size};const statsAdicionales=React.useMemo(()=>{const agotadas=historialFiltrado.filter(u=>!u.activa);// productos más vendidos (cantidad de unidades agotadas)\nconst productosMasVendidos=agotadas.reduce((acc,u)=>{const nombre=u.producto.nombre;acc[nombre]=(acc[nombre]||0)+1;return acc;},{});// peso total vendido por tipo de queso\nconst pesoPorTipo=agotadas.reduce((acc,u)=>{const tipo=u.producto.tipoQueso.nombre;acc[tipo]=(acc[tipo]||0)+Number(u.pesoInicial);return acc;},{});return{productosMasVendidos,pesoPorTipo};},[historialFiltrado]);const handleOpenHistorial=async()=>{setShowHistorial(true);await fetchHistorial();};// Modificar la función renderUnidadCard para el historial\nconst renderUnidadCard=function(unidad){let isHistorial=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return/*#__PURE__*/_jsxs(\"div\",{className:\"unit-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"unit-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"unit-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"unit-title-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(getTipoBadgeClass(unidad.producto.tipoQueso.nombre)),children:unidad.producto.tipoQueso.nombre}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-plu\",children:[\"PLU: \",unidad.producto.plu]}),/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(unidad.activa?'badge-status':'badge-inactive'),children:unidad.activa?'Activa':'Agotada'}),isHistorial&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge\",style:{background:'#e0e7ff',color:'#4338ca'},children:[\"Stock Actual: \",getStockActualProducto(unidad.producto.id)]}),!isHistorial&&unidad.activa&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge\",style:{background:'#e0e7ff',color:'#4338ca'},children:[\"Stock: \",contarUnidadesPorProducto(unidad.producto.id)]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"unit-name\",children:unidad.producto.nombre}),/*#__PURE__*/_jsxs(\"div\",{className:\"unit-id\",children:[\"ID: #\",unidad.id]}),isHistorial&&!unidad.activa&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'0.5rem',fontSize:'0.875rem',color:'#6b7280'},children:[\"Unidades agotadas: \",getUnidadesAgotadasProducto(unidad.producto.id),\" | Peso vendido: \",(getPesoVendidoProducto(unidad.producto.id)/1000).toFixed(1),\"kg\"]})]}),unidad.activa&&!isHistorial&&/*#__PURE__*/_jsx(\"div\",{className:\"unit-actions\",children:unidad.activa&&!isHistorial&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-action btn-cut\",onClick:()=>handleOpenCutModal(unidad),children:\"\\u2702\\uFE0F Cortar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-action btn-edit\",onClick:()=>{setUnidadParaEditar(unidad);setShowEditModal(true);},children:\"\\u270F\\uFE0F Editar\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"unit-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-label\",children:\"Peso Inicial\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-value\",children:[unidad.pesoInicial,\"g\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-label\",children:\"Peso Actual\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-value highlight\",children:[unidad.pesoActual,\"g\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-label\",children:\"Cortado\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-value\",children:[Number(unidad.pesoInicial)-Number(unidad.pesoActual),\"g\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"detail-label\",children:\"Ingresado\"}),/*#__PURE__*/_jsx(\"div\",{className:\"detail-value\",style:{fontSize:'0.875rem'},children:formatDate(unidad.createdAt)})]})]}),unidad.observacionesIngreso&&/*#__PURE__*/_jsxs(\"div\",{className:\"observaciones-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"observaciones-title\",children:\"Observaciones de Ingreso\"}),/*#__PURE__*/_jsx(\"div\",{className:\"observaciones-content\",children:unidad.observacionesIngreso})]}),unidad.particiones&&unidad.particiones.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"partitions-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"partitions-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"partitions-title\",children:\"Historial de Cortes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"partitions-count\",children:unidad.particiones.length})]}),/*#__PURE__*/_jsx(\"div\",{className:\"partitions-list\",children:unidad.particiones.map((particion,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"partition-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"partition-number\",children:[\"Corte #\",idx+1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"partition-weight\",children:[particion.peso,\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"partition-date\",children:formatDate(particion.createdAt)}),particion.observacionesCorte&&/*#__PURE__*/_jsx(\"div\",{className:\"partition-observaciones\",children:particion.observacionesCorte})]},particion.id))})]})]},unidad.id);};// Agregar este componente antes del return principal\nconst EditModal=_ref=>{let{unidad,onClose,onSave}=_ref;const[observaciones,setObservaciones]=useState((unidad===null||unidad===void 0?void 0:unidad.observacionesIngreso)||'');if(!unidad)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"modal-title\",children:\"Editar Unidad\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Producto\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",value:unidad.producto.nombre,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Observaciones de Ingreso\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-input\",value:observaciones,onChange:e=>setObservaciones(e.target.value),rows:4,placeholder:\"Ej: Lote #123, Vencimiento: 15/03, etc.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel\",onClick:onClose,children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm\",onClick:()=>onSave(observaciones),children:\"Guardar\"})]})]})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-icon\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"32\",height:\"32\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"white\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M16.5 9.4l-9-5.19M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"3.29 7 12 12 20.71 7\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"22\",x2:\"12\",y2:\"12\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Stock de Quesos\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Las Tres Estrellas\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:unidades.filter(u=>u.activa).length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Activas\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-divider\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:productos.length}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-label\",children:\"Productos\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary\",onClick:handleOpenHistorial,children:[/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 3v5h5M3 8a9 9 0 1 0 18 0A9 9 0 0 0 3 8z\"})}),\"Historial\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn-primary\",onClick:()=>setShowForm(!showForm),children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"13\",r:\"4\"})]}),showForm?'Cerrar':'Nuevo Ingreso']})]})]})}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-error\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert-title\",children:\"Valida\"}),/*#__PURE__*/_jsx(\"div\",{children:error})]})]}),success&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert-icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert-title\",children:\"\\xC9xito\"}),/*#__PURE__*/_jsx(\"div\",{children:success})]})]}),showEditModal&&/*#__PURE__*/_jsx(EditModal,{unidad:unidadParaEditar,onClose:()=>{setShowEditModal(false);setUnidadParaEditar(null);},onSave:observaciones=>{if(unidadParaEditar){handleEditUnidad(unidadParaEditar.id,observaciones);setShowEditModal(false);setUnidadParaEditar(null);}}}),showHistorial&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowHistorial(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal historial-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"modal-title\",children:\"\\uD83D\\uDCCB Historial Completo\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:()=>setShowHistorial(false),children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"historial-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-value\",children:statsHistorial.total}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-label\",children:\"Total Unidades\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-card-success\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-value\",children:statsHistorial.activos}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-label\",children:\"Activas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-card-inactive\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-value\",children:statsHistorial.agotados}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-label\",children:\"Agotadas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-card-primary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card-value\",children:[(statsHistorial.pesoTotal/1000).toFixed(1),\"kg\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-label\",children:\"Peso Total\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card stat-card-warning\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card-value\",children:[(statsHistorial.pesoVendido/1000).toFixed(1),\"kg\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card-label\",children:\"EGRESO TOTAL\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"historial-filters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Rango de Fechas\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-input\",value:fechaInicio,onChange:e=>setFechaInicio(e.target.value),style:{flex:1}}),/*#__PURE__*/_jsx(\"span\",{children:\"hasta\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-input\",value:fechaFin,onChange:e=>setFechaFin(e.target.value),style:{flex:1}}),(fechaInicio||fechaFin)&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-action\",onClick:()=>{setFechaInicio('');setFechaFin('');},style:{background:'#ef4444',color:'white',border:'none'},children:\"\\u2715\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Tipo de Queso\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:tipoQuesoFiltro,onChange:e=>setTipoQuesoFiltro(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"todos\",children:\"Todos los tipos\"}),/*#__PURE__*/_jsx(\"option\",{value:\"blando\",children:\"Blando\"}),/*#__PURE__*/_jsx(\"option\",{value:\"semi-duro\",children:\"Semi-duro\"}),/*#__PURE__*/_jsx(\"option\",{value:\"duro\",children:\"Duro\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",placeholder:\"\\uD83D\\uDD0D Buscar por nombre, PLU, ID o observaciones...\",value:busquedaHistorial,onChange:e=>setBusquedaHistorial(e.target.value)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"filter-btn \".concat(filtroHistorial==='todos'?'active':''),onClick:()=>setFiltroHistorial('todos'),children:[\"Todos (\",statsHistorial.total,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"filter-btn \".concat(filtroHistorial==='activos'?'active':''),onClick:()=>setFiltroHistorial('activos'),children:[\"Activos (\",statsHistorial.activos,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"filter-btn \".concat(filtroHistorial==='agotados'?'active':''),onClick:()=>setFiltroHistorial('agotados'),children:[\"Agotados (\",statsHistorial.agotados,\")\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"historial-content\",children:historialFiltrado.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No se encontraron registros\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Intenta ajustar los filtros de b\\xFAsqueda\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"inventory-grid\",children:historialFiltrado.map(unidad=>renderUnidadCard(unidad,true))})})]})}),showForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"card form-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registrar Nueva Unidad\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"C\\xF3digo de Barras\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input barcode-input\",value:codigoBarras,onChange:handleBarcodeChange,placeholder:\"0000000000000\",maxLength:13}),/*#__PURE__*/_jsx(\"div\",{className:\"form-hint\",children:\"Formato: 00 + PLU (5 d\\xEDgitos) + Peso (5 d\\xEDgitos) + 1 d\\xEDgito\"})]}),productoSeleccionado&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Producto Detectado\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",value:productoSeleccionado.nombre,disabled:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-hint\",children:[\"Peso: \",((_decodificarBarcode=decodificarBarcode(codigoBarras))===null||_decodificarBarcode===void 0?void 0:_decodificarBarcode.peso)||0,\"g\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Observaciones de Ingreso (opcional)\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-input\",value:observacionesIngreso,onChange:e=>setObservacionesIngreso(e.target.value),placeholder:\"Ej: Lote #123, Vencimiento: 15/03, etc.\",rows:3})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-submit\",onClick:handleSubmit,disabled:loading||!productoSeleccionado,children:loading?'Procesando...':'Registrar Unidad'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Inventario Actual\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Buscar en inventario\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',alignItems:'flex-end'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",value:filtroInventario,onChange:e=>setFiltroInventario(e.target.value),placeholder:\"Buscar por nombre, PLU o ID...\",style:{flex:1}}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-btn \".concat(busquedaObservaciones?'active':''),onClick:()=>setBusquedaObservaciones(!busquedaObservaciones),style:{marginBottom:0},children:\"\\uD83D\\uDD0D Observaciones\"})]})]}),unidadesFiltradas.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No se encontraron unidades\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Intenta ajustar los filtros de b\\xFAsqueda\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"inventory-grid\",children:unidadesFiltradas.map(unidad=>renderUnidadCard(unidad))})]}),showCutModal&&unidadParaCortar&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowCutModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"modal-title\",children:\"Realizar Corte\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:()=>setShowCutModal(false),children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Producto\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",value:unidadParaCortar.producto.nombre,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Peso Disponible\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",value:\"\".concat(unidadParaCortar.pesoActual,\"g\"),disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Escanear c\\xF3digo de barras del queso despu\\xE9s del corte\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input barcode-input\",value:codigoBarrasCorte,onChange:handleBarcodeCorteChange,placeholder:\"0000000000000\",maxLength:13}),/*#__PURE__*/_jsx(\"div\",{className:\"form-hint\",children:\"Escane\\xE1 el c\\xF3digo del queso que qued\\xF3. Se calcular\\xE1 autom\\xE1ticamente cu\\xE1nto se cort\\xF3.\"})]}),pesoCorte&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Peso a cortar (calculado)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-input\",value:\"\".concat(pesoCorte,\"g\"),disabled:true})]}),unidadParaCortar.pesoActual>0&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn-action btn-cut\",onClick:async()=>{const pesoFinal=unidadParaCortar.pesoActual;setPesoCorte(pesoFinal.toString());setObservacionesCorte('Corte final – queso agotado');await handleCut();},children:[\"\\uD83E\\uDDC0 Egresar todo (\",unidadParaCortar.pesoActual,\"g)\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Observaciones del corte (opcional)\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-input\",value:observacionesCorte,onChange:e=>setObservacionesCorte(e.target.value),placeholder:\"Ej: Cliente: Juan P\\xE9rez, Pedido especial, etc.\",rows:3})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel\",onClick:()=>setShowCutModal(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-confirm\",onClick:handleCut,disabled:loading||!pesoCorte,children:loading?'Procesando...':'Confirmar Corte'})]})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","App","_decodificarBarcode","unidades","setUnidades","productos","setProductos","tiposQueso","setTiposQueso","showForm","setShowForm","error","setError","success","setSuccess","loading","setLoading","codigoBarras","setCodigoBarras","productoSeleccionado","setProductoSeleccionado","observacionesIngreso","setObservacionesIngreso","observacionesCorte","setObservacionesCorte","codigoBarrasCorte","setCodigoBarrasCorte","filtroInventario","setFiltroInventario","busquedaObservaciones","setBusquedaObservaciones","showHistorial","setShowHistorial","historialUnidades","setHistorialUnidades","filtroHistorial","setFiltroHistorial","busquedaHistorial","setBusquedaHistorial","showCutModal","setShowCutModal","unidadParaCortar","setUnidadParaCortar","pesoCorte","setPesoCorte","showEditModal","setShowEditModal","unidadParaEditar","setUnidadParaEditar","fechaInicio","setFechaInicio","fechaFin","setFechaFin","tipoQuesoFiltro","setTipoQuesoFiltro","precios","setPrecios","fetchData","Promise","all","fetchUnidades","fetchProductos","fetchTiposQueso","response","fetch","concat","data","json","console","fetchHistorial","decodificarBarcode","barcode","length","plu","substring","pesoStr","pesoGramos","parseInt","isNaN","producto","find","p","peso","unidadesFiltradas","filter","unidad","searchLower","toLowerCase","matchNombre","nombre","includes","matchPLU","matchID","id","toString","matchObservaciones","contarUnidadesPorProducto","productoId","u","activa","handleEditUnidad","unidadId","nuevasObservaciones","method","headers","body","JSON","stringify","ok","setTimeout","errorData","getStockActualProducto","getUnidadesAgotadasProducto","getPesoVendidoProducto","reduce","sum","Number","pesoInicial","handleBarcodeCorteChange","e","value","target","resultado","nuevoPeso","pesoActual","corte","handleBarcodeChange","handleSubmit","handleOpenCutModal","handleCut","parseFloat","formatDate","dateString","Date","toLocaleDateString","day","month","year","hour","minute","getTipoBadgeClass","tipo","tipos","historialFiltrado","tipoQueso","unidadFecha","createdAt","inicio","fin","_unidad$observaciones","statsHistorial","total","activos","agotados","pesoTotal","pesoVendido","productosDiferentes","Set","map","size","statsAdicionales","useMemo","agotadas","productosMasVendidos","acc","pesoPorTipo","handleOpenHistorial","renderUnidadCard","isHistorial","arguments","undefined","className","children","style","background","color","marginTop","fontSize","toFixed","onClick","particiones","particion","idx","EditModal","_ref","onClose","onSave","observaciones","setObservaciones","stopPropagation","type","disabled","onChange","rows","placeholder","width","height","viewBox","fill","stroke","strokeWidth","d","points","x1","y1","x2","y2","display","gap","cx","cy","r","alignItems","flex","border","maxLength","marginBottom","pesoFinal"],"sources":["C:/Users/Usuario/Desktop/cheese-stock-system/frontend/src/App.tsx"],"sourcesContent":["// App.tsx\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\n\nconst API_URL = 'http://localhost:3000/api';\n\ninterface TipoQueso {\n  id: number;\n  nombre: string;\n}\n\ninterface Producto {\n  id: number;\n  nombre: string;\n  plu: string;\n  seVendePorUnidad: boolean;\n  tipoQueso: TipoQueso;\n}\n\ninterface Particion {\n  id: number;\n  peso: number;\n  createdAt: string;\n  observacionesCorte: string | null;\n}\n\ninterface Unidad {\n  id: number;\n  producto: Producto;\n  pesoInicial: number;\n  pesoActual: number;\n  activa: boolean;\n  particiones: Particion[];\n  createdAt: string;\n  observacionesIngreso: string | null;\n}\n\nfunction App() {\n  const [unidades, setUnidades] = useState<Unidad[]>([]);\n  const [productos, setProductos] = useState<Producto[]>([]);\n  const [tiposQueso, setTiposQueso] = useState<TipoQueso[]>([]);\n  const [showForm, setShowForm] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Form state\n  const [codigoBarras, setCodigoBarras] = useState('');\n  const [productoSeleccionado, setProductoSeleccionado] = useState<Producto | null>(null);\n  const [observacionesIngreso, setObservacionesIngreso] = useState('');\n  const [observacionesCorte, setObservacionesCorte] = useState('');\n  const [codigoBarrasCorte, setCodigoBarrasCorte] = useState('');\n\n  // Agregar estos estados al inicio del componente\n  const [filtroInventario, setFiltroInventario] = useState('');\n  const [busquedaObservaciones, setBusquedaObservaciones] = useState(false);\n \n  // Historial state\n  const [showHistorial, setShowHistorial] = useState(false);\n  const [historialUnidades, setHistorialUnidades] = useState<Unidad[]>([]);\n  const [filtroHistorial, setFiltroHistorial] = useState<'todos' | 'activos' | 'agotados'>('todos');\n  const [busquedaHistorial, setBusquedaHistorial] = useState('');\n\n  // Modal state\n  const [showCutModal, setShowCutModal] = useState(false);\n  const [unidadParaCortar, setUnidadParaCortar] = useState<Unidad | null>(null);\n  const [pesoCorte, setPesoCorte] = useState('');\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [unidadParaEditar, setUnidadParaEditar] = useState<Unidad | null>(null);\n\n  // Agregar estos estados\n  const [fechaInicio, setFechaInicio] = useState('');\n  const [fechaFin, setFechaFin] = useState('');\n  const [tipoQuesoFiltro, setTipoQuesoFiltro] = useState<string>('todos');\n  const [precios, setPrecios] = useState<Record<number, number>>({}); // productoId -> precio\n  \n  \n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    await Promise.all([\n      fetchUnidades(),\n      fetchProductos(),\n      fetchTiposQueso()\n    ]);\n  };\n\n  const fetchUnidades = async () => {\n    try {\n      const response = await fetch(`${API_URL}/unidades`);\n      const data = await response.json();\n      setUnidades(data);\n    } catch (error) {\n      console.error('Error al cargar unidades:', error);\n    }\n  };\n\n  const fetchProductos = async () => {\n    try {\n      const response = await fetch(`${API_URL}/productos`);\n      const data = await response.json();\n      setProductos(data);\n    } catch (error) {\n      console.error('Error al cargar productos:', error);\n    }\n  };\n\n  const fetchHistorial = async () => {\n    try {\n      const response = await fetch(`${API_URL}/unidades/historial`);\n      const data = await response.json();\n      setHistorialUnidades(data);\n    } catch (error) {\n      console.error('Error al cargar historial:', error);\n    }\n  };\n\n  const fetchTiposQueso = async () => {\n    try {\n      const response = await fetch(`${API_URL}/tipos-queso`);\n      const data = await response.json();\n      setTiposQueso(data);\n    } catch (error) {\n      console.error('Error al cargar tipos de queso:', error);\n    }\n  };\n\n  const decodificarBarcode = (barcode: string) => {\n    if (barcode.length !== 13) {\n      setError('El código debe tener exactamente 13 dígitos');\n      return null;\n    }\n\n    const plu = barcode.substring(2, 7);\n    const pesoStr = barcode.substring(7, 12);\n    const pesoGramos = parseInt(pesoStr, 10);\n\n    if (isNaN(pesoGramos) || pesoGramos <= 0) {\n      setError('Peso inválido en código de barras');\n      return null;\n    }\n\n    const producto = productos.find(p => p.plu === plu);\n    if (!producto) {\n      setError(`No se encontró producto con PLU: ${plu}`);\n      return null;\n    }\n\n    return { producto, peso: pesoGramos };\n  };\n \n  // Agregar esta función para filtrar unidades\n  const unidadesFiltradas = unidades.filter(unidad => {\n    const searchLower = filtroInventario.toLowerCase();\n    const matchNombre = unidad.producto.nombre.toLowerCase().includes(searchLower);\n    const matchPLU = unidad.producto.plu.includes(searchLower);\n    const matchID = unidad.id.toString().includes(searchLower);\n    \n    // Si está activada la búsqueda por observaciones\n    if (busquedaObservaciones && unidad.observacionesIngreso) {\n      const matchObservaciones = unidad.observacionesIngreso.toLowerCase().includes(searchLower);\n      return matchObservaciones;\n    }\n    \n    return matchNombre || matchPLU || matchID;\n  });\n  \n  // Agregar función para contar unidades por producto\n  const contarUnidadesPorProducto = (productoId: number) => {\n    return unidades.filter(u => u.producto.id === productoId && u.activa).length;\n  };\n\n  // Agregar función para editar unidad\n  const handleEditUnidad = async (unidadId: number, nuevasObservaciones: string) => {\n    try {\n      const response = await fetch(`${API_URL}/unidades/${unidadId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ observacionesIngreso: nuevasObservaciones }),\n      });\n\n      if (response.ok) {\n        setSuccess('Unidad actualizada correctamente');\n        await fetchUnidades();\n        setTimeout(() => setSuccess(''), 3000);\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Error al actualizar unidad');\n      }\n    } catch (error) {\n      setError('Error de conexión con el servidor');\n    }\n  };\n\n\n    // Función para obtener el stock actual de un producto\n  const getStockActualProducto = (productoId: number) => {\n    return unidades.filter(u => u.producto.id === productoId && u.activa).length;\n  };\n\n  // Función para calcular cuántas unidades se agotaron de un producto\n  const getUnidadesAgotadasProducto = (productoId: number) => {\n    return historialUnidades.filter(u => u.producto.id === productoId && !u.activa).length;\n  };\n\n  // Función para calcular el peso total vendido por producto\n  const getPesoVendidoProducto = (productoId: number) => {\n    return historialUnidades\n      .filter(u => u.producto.id === productoId && !u.activa)\n      .reduce((sum, u) => sum + (Number(u.pesoInicial)), 0);\n  };\n\n  const handleBarcodeCorteChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setCodigoBarrasCorte(value);\n\n    if (value.length === 13 && unidadParaCortar) {\n      const resultado = decodificarBarcode(value);\n      if (!resultado) {\n        setError('Código de barras inválido');\n        return;\n      }\n\n      const nuevoPeso = resultado.peso;\n      const pesoActual = unidadParaCortar.pesoActual;\n\n      if (nuevoPeso > pesoActual) {\n        setError('El peso escaneado es mayor al disponible');\n        setPesoCorte('');\n        return;\n      }\n\n      const corte = pesoActual - nuevoPeso;\n      setPesoCorte(corte.toString());\n    }\n  };\n\n\n  const handleBarcodeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setCodigoBarras(value);\n    setError('');\n    setProductoSeleccionado(null);\n\n    if (value.length === 13) {\n      const resultado = decodificarBarcode(value);\n      if (resultado) {\n        setProductoSeleccionado(resultado.producto);\n      }\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!codigoBarras || codigoBarras.length !== 13) {\n      setError('Ingrese un código de barras válido de 13 dígitos');\n      return;\n    }\n\n    const resultado = decodificarBarcode(codigoBarras);\n    if (!resultado) return;\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch(`${API_URL}/unidades`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          productoId: resultado.producto.id,\n          pesoInicial: resultado.peso,\n          observacionesIngreso: observacionesIngreso || null,\n        }),\n      });\n\n      if (response.ok) {\n        setSuccess('Unidad ingresada correctamente');\n        setCodigoBarras('');\n        setProductoSeleccionado(null);\n        setObservacionesIngreso('');\n        setShowForm(false);\n        await fetchUnidades();\n        setTimeout(() => setSuccess(''), 3000);\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Error al ingresar unidad');\n      }\n    } catch (error) {\n      setError('Error de conexión con el servidor');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleOpenCutModal = (unidad: Unidad) => {\n    setUnidadParaCortar(unidad);\n    setPesoCorte('');\n    setObservacionesCorte('');\n    setShowCutModal(true);\n  };\n\n  const handleCut = async () => {\n    if (!unidadParaCortar) return;\n\n    const peso = parseFloat(pesoCorte);\n    if (isNaN(peso) || peso < 0) {\n      setError('¿Confirmas el corte?');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch(`${API_URL}/unidades/${unidadParaCortar.id}/particiones`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          peso,\n          observacionesCorte: observacionesCorte || 'Corte sin observaciones',\n        }),\n      });\n\n      if (response.ok) {\n        setSuccess('Corte registrado');\n        setShowCutModal(false);\n        setCodigoBarrasCorte('');\n        setPesoCorte('');\n        setObservacionesCorte('');\n        await fetchUnidades();\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Error al cortar');\n      }\n    } catch (error) {\n      setError('Error de conexión');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('es-AR', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getTipoBadgeClass = (tipo: string) => {\n    const tipos: { [key: string]: string } = {\n      'blando': 'badge-blando',\n      'semi-duro': 'badge-semi-duro',\n      'duro': 'badge-duro',\n    };\n    return tipos[tipo?.toLowerCase()] || 'badge-blando';\n  };\n\n  // Reemplazar la función de filtrado del historial\n  const historialFiltrado = historialUnidades.filter(unidad => {\n    // Filtro por estado (activos/agotados/todos)\n    if (filtroHistorial === 'activos' && !unidad.activa) return false;\n    if (filtroHistorial === 'agotados' && unidad.activa) return false;\n\n    // Filtro por tipo de queso\n    if (tipoQuesoFiltro !== 'todos' && unidad.producto.tipoQueso.nombre.toLowerCase() !== tipoQuesoFiltro) {\n      return false;\n    }\n\n    // Filtro por fechas\n    if (fechaInicio || fechaFin) {\n      const unidadFecha = new Date(unidad.createdAt);\n      const inicio = fechaInicio ? new Date(fechaInicio) : null;\n      const fin = fechaFin ? new Date(fechaFin) : null;\n\n      if (inicio && unidadFecha < inicio) return false;\n      if (fin && unidadFecha > fin) return false;\n    }\n\n    // Filtro por búsqueda de texto\n    if (busquedaHistorial) {\n      const searchLower = busquedaHistorial.toLowerCase();\n      const matchNombre = unidad.producto.nombre.toLowerCase().includes(searchLower);\n      const matchPLU = unidad.producto.plu.includes(searchLower);\n      const matchID = unidad.id.toString().includes(searchLower);\n      const matchObservaciones = unidad.observacionesIngreso?.toLowerCase().includes(searchLower);\n      \n      return matchNombre || matchPLU || matchID || matchObservaciones;\n    }\n\n    return true;\n  });\n\n\n  // Calcular estadísticas del historial con los nuevos filtros\n  const statsHistorial = {\n    total: historialFiltrado.length,\n    activos: historialFiltrado.filter(u => u.activa).length,\n    agotados: historialFiltrado.filter(u => !u.activa).length,\n    pesoTotal: historialFiltrado.reduce((sum, u) => sum + Number(u.pesoInicial), 0),\n    pesoVendido: historialFiltrado.reduce((sum, u) => sum + (Number(u.pesoInicial) - Number(u.pesoActual)), 0),\n    productosDiferentes: new Set(historialFiltrado.map(u => u.producto.id)).size,\n  };\n  const statsAdicionales = React.useMemo(() => {\n    const agotadas = historialFiltrado.filter(u => !u.activa);\n\n    // productos más vendidos (cantidad de unidades agotadas)\n    const productosMasVendidos = agotadas.reduce<Record<string, number>>((acc, u) => {\n      const nombre = u.producto.nombre;\n      acc[nombre] = (acc[nombre] || 0) + 1;\n      return acc;\n    }, {});\n\n    // peso total vendido por tipo de queso\n    const pesoPorTipo = agotadas.reduce<Record<string, number>>((acc, u) => {\n      const tipo = u.producto.tipoQueso.nombre;\n      acc[tipo] = (acc[tipo] || 0) + Number(u.pesoInicial);\n      return acc;\n    }, {});\n\n    return { productosMasVendidos, pesoPorTipo };\n  }, [historialFiltrado]);\n\n  const handleOpenHistorial = async () => {\n    setShowHistorial(true);\n    await fetchHistorial();\n  };\n\n  // Modificar la función renderUnidadCard para el historial\n  const renderUnidadCard = (unidad: Unidad, isHistorial = false) => (\n    <div key={unidad.id} className=\"unit-card\">\n      <div className=\"unit-header\">\n        <div className=\"unit-info\">\n          <div className=\"unit-title-row\">\n            <span className={`badge ${getTipoBadgeClass(unidad.producto.tipoQueso.nombre)}`}>\n              {unidad.producto.tipoQueso.nombre}\n            </span>\n            <span className=\"badge badge-plu\">PLU: {unidad.producto.plu}</span>\n            <span className={`badge ${unidad.activa ? 'badge-status' : 'badge-inactive'}`}>\n              {unidad.activa ? 'Activa' : 'Agotada'}\n            </span>\n            \n            {/* Mostrar stock actual solo en historial */}\n            {isHistorial && (\n              <span className=\"badge\" style={{ background: '#e0e7ff', color: '#4338ca' }}>\n                Stock Actual: {getStockActualProducto(unidad.producto.id)}\n              </span>\n            )}\n            \n            {/* Mostrar contador solo en inventario actual */}\n            {!isHistorial && unidad.activa && (\n              <span className=\"badge\" style={{ background: '#e0e7ff', color: '#4338ca' }}>\n                Stock: {contarUnidadesPorProducto(unidad.producto.id)}\n              </span>\n            )}\n          </div>\n          <h3 className=\"unit-name\">{unidad.producto.nombre}</h3>\n          <div className=\"unit-id\">ID: #{unidad.id}</div>\n          \n          {/* Agregar información adicional en el historial */}\n          {isHistorial && !unidad.activa && (\n            <div style={{ marginTop: '0.5rem', fontSize: '0.875rem', color: '#6b7280' }}>\n              Unidades agotadas: {getUnidadesAgotadasProducto(unidad.producto.id)} | \n              Peso vendido: {(getPesoVendidoProducto(unidad.producto.id) / 1000).toFixed(1)}kg\n            </div>\n          )}\n        </div>\n\n        {unidad.activa && !isHistorial && (\n                  <div className=\"unit-actions\">\n                    {unidad.activa && !isHistorial && (\n                      <>\n                        <button\n                          className=\"btn-action btn-cut\"\n                          onClick={() => handleOpenCutModal(unidad)}\n                        >\n                          ✂️ Cortar\n                        </button>\n                        <button\n                          className=\"btn-action btn-edit\"\n                          onClick={() => {\n                            setUnidadParaEditar(unidad);\n                            setShowEditModal(true);\n                          }}\n                        >\n                          ✏️ Editar\n                        </button>\n                      </>\n      )}\n    </div>\n        )}\n      </div>\n\n      <div className=\"unit-details\">\n        <div className=\"detail-item\">\n          <div className=\"detail-label\">Peso Inicial</div>\n          <div className=\"detail-value\">{unidad.pesoInicial}g</div>\n        </div>\n        <div className=\"detail-item\">\n          <div className=\"detail-label\">Peso Actual</div>\n          <div className=\"detail-value highlight\">{unidad.pesoActual}g</div>\n        </div>\n        <div className=\"detail-item\">\n          <div className=\"detail-label\">Cortado</div>\n          <div className=\"detail-value\">{Number(unidad.pesoInicial) - Number(unidad.pesoActual)}g</div>\n        </div>\n        <div className=\"detail-item\">\n          <div className=\"detail-label\">Ingresado</div>\n          <div className=\"detail-value\" style={{ fontSize: '0.875rem' }}>\n            {formatDate(unidad.createdAt)}\n          </div>\n        </div>\n      </div>\n\n      {unidad.observacionesIngreso && (\n        <div className=\"observaciones-section\">\n          <div className=\"observaciones-title\">Observaciones de Ingreso</div>\n          <div className=\"observaciones-content\">{unidad.observacionesIngreso}</div>\n        </div>\n      )}\n\n      {unidad.particiones && unidad.particiones.length > 0 && (\n        <div className=\"partitions-section\">\n          <div className=\"partitions-header\">\n            <div className=\"partitions-title\">Historial de Cortes</div>\n            <div className=\"partitions-count\">{unidad.particiones.length}</div>\n          </div>\n          <div className=\"partitions-list\">\n            {unidad.particiones.map((particion, idx) => (\n              <div key={particion.id} className=\"partition-item\">\n                <div className=\"partition-number\">Corte #{idx + 1}</div>\n                <div className=\"partition-weight\">{particion.peso}g</div>\n                <div className=\"partition-date\">{formatDate(particion.createdAt)}</div>\n                {particion.observacionesCorte && (\n                  <div className=\"partition-observaciones\">{particion.observacionesCorte}</div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n  // Agregar este componente antes del return principal\nconst EditModal = ({ unidad, onClose, onSave }: { \n  unidad: Unidad | null; \n  onClose: () => void; \n  onSave: (observaciones: string) => void;\n}) => {\n  const [observaciones, setObservaciones] = useState(unidad?.observacionesIngreso || '');\n\n  if (!unidad) return null;\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h3 className=\"modal-title\">Editar Unidad</h3>\n          <button className=\"btn-close\" onClick={onClose}>✕</button>\n        </div>\n\n        <div className=\"form-group\">\n          <label className=\"form-label\">Producto</label>\n          <input type=\"text\" className=\"form-input\" value={unidad.producto.nombre} disabled />\n        </div>\n\n        <div className=\"form-group\">\n          <label className=\"form-label\">Observaciones de Ingreso</label>\n          <textarea\n            className=\"form-input\"\n            value={observaciones}\n            onChange={(e) => setObservaciones(e.target.value)}\n            rows={4}\n            placeholder=\"Ej: Lote #123, Vencimiento: 15/03, etc.\"\n          />\n        </div>\n\n        <div className=\"modal-actions\">\n          <button className=\"btn-cancel\" onClick={onClose}>Cancelar</button>\n          <button className=\"btn-confirm\" onClick={() => onSave(observaciones)}>Guardar</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n  return (\n    <div className=\"app\">\n      {/* Header */}\n      <div className=\"header\">\n        <div className=\"header-content\">\n          <div className=\"header-left\">\n            <div className=\"header-icon\">\n              <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" strokeWidth=\"2\">\n                <path d=\"M16.5 9.4l-9-5.19M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\" />\n                <polyline points=\"3.29 7 12 12 20.71 7\" />\n                <line x1=\"12\" y1=\"22\" x2=\"12\" y2=\"12\" />\n              </svg>\n            </div>\n            <div className=\"header-title\">\n              <h1>Stock de Quesos</h1>\n              <p>Las Tres Estrellas</p>\n            </div>\n          </div>\n\n          <div className=\"header-stats\">\n            <div className=\"stat-item\">\n              <div className=\"stat-value\">{unidades.filter(u => u.activa).length}</div>\n              <div className=\"stat-label\">Activas</div>\n            </div>\n            <div className=\"stat-divider\"></div>\n            <div className=\"stat-item\">\n              <div className=\"stat-value\">{productos.length}</div>\n              <div className=\"stat-label\">Productos</div>\n            </div>\n          </div>\n\n          <div style={{ display: 'flex', gap: '1rem' }}>\n            <button className=\"btn-primary\" onClick={handleOpenHistorial}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M3 3v5h5M3 8a9 9 0 1 0 18 0A9 9 0 0 0 3 8z\" />\n              </svg>\n              Historial\n            </button>\n            <button className=\"btn-primary\" onClick={() => setShowForm(!showForm)}>\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\" />\n                <circle cx=\"12\" cy=\"13\" r=\"4\" />\n              </svg>\n              {showForm ? 'Cerrar' : 'Nuevo Ingreso'}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Alerts */}\n      {error && (\n        <div className=\"alert alert-error\">\n          <div className=\"alert-icon\">⚠️</div>\n          <div className=\"alert-content\">\n            <div className=\"alert-title\">Valida</div>\n            <div>{error}</div>\n          </div>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"alert alert-success\">\n          <div className=\"alert-icon\">✓</div>\n          <div className=\"alert-content\">\n            <div className=\"alert-title\">Éxito</div>\n            <div>{success}</div>\n          </div>\n        </div>\n      )}\n      {showEditModal && (\n        <EditModal\n          unidad={unidadParaEditar}\n          onClose={() => {\n            setShowEditModal(false);\n            setUnidadParaEditar(null);\n          }}\n          onSave={(observaciones) => {\n            if (unidadParaEditar) {\n              handleEditUnidad(unidadParaEditar.id, observaciones);\n              setShowEditModal(false);\n              setUnidadParaEditar(null);\n            }\n          }}\n        />\n      )}\n      {/* Historial Modal */}\n      {showHistorial && (\n        <div className=\"modal-overlay\" onClick={() => setShowHistorial(false)}>\n          <div className=\"modal historial-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3 className=\"modal-title\">📋 Historial Completo</h3>\n              <button className=\"btn-close\" onClick={() => setShowHistorial(false)}>\n                ✕\n              </button>\n            </div>\n\n            {/* Estadísticas del historial */}\n            <div className=\"historial-stats\">\n              <div className=\"stat-card\">\n                <div className=\"stat-card-value\">{statsHistorial.total}</div>\n                <div className=\"stat-card-label\">Total Unidades</div>\n              </div>\n              <div className=\"stat-card stat-card-success\">\n                <div className=\"stat-card-value\">{statsHistorial.activos}</div>\n                <div className=\"stat-card-label\">Activas</div>\n              </div>\n              <div className=\"stat-card stat-card-inactive\">\n                <div className=\"stat-card-value\">{statsHistorial.agotados}</div>\n                <div className=\"stat-card-label\">Agotadas</div>\n              </div>\n              <div className=\"stat-card stat-card-primary\">\n                <div className=\"stat-card-value\">{(statsHistorial.pesoTotal / 1000).toFixed(1)}kg</div>\n                <div className=\"stat-card-label\">Peso Total</div>\n              </div>\n              <div className=\"stat-card stat-card-warning\">\n                <div className=\"stat-card-value\">{(statsHistorial.pesoVendido / 1000).toFixed(1)}kg</div>\n                <div className=\"stat-card-label\">EGRESO TOTAL</div>\n              </div>\n            </div>\n\n            {/* Filtros */}\n            <div className=\"historial-filters\">\n              {/* Filtro por fechas */}\n              <div className=\"filter-group\">\n                <label className=\"form-label\">Rango de Fechas</label>\n                <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n                  <input\n                    type=\"date\"\n                    className=\"form-input\"\n                    value={fechaInicio}\n                    onChange={(e) => setFechaInicio(e.target.value)}\n                    style={{ flex: 1 }}\n                  />\n                  <span>hasta</span>\n                  <input\n                    type=\"date\"\n                    className=\"form-input\"\n                    value={fechaFin}\n                    onChange={(e) => setFechaFin(e.target.value)}\n                    style={{ flex: 1 }}\n                  />\n                  {(fechaInicio || fechaFin) && (\n                    <button\n                      className=\"btn-action\"\n                      onClick={() => {\n                        setFechaInicio('');\n                        setFechaFin('');\n                      }}\n                      style={{ background: '#ef4444', color: 'white', border: 'none' }}\n                    >\n                      ✕\n                    </button>\n                  )}\n                </div>\n              </div>\n\n              {/* Filtro por tipo de queso */}\n              <div className=\"filter-group\">\n                <label className=\"form-label\">Tipo de Queso</label>\n                <select\n                  className=\"form-select\"\n                  value={tipoQuesoFiltro}\n                  onChange={(e) => setTipoQuesoFiltro(e.target.value)}\n                >\n                  <option value=\"todos\">Todos los tipos</option>\n                  <option value=\"blando\">Blando</option>\n                  <option value=\"semi-duro\">Semi-duro</option>\n                  <option value=\"duro\">Duro</option>\n                </select>\n              </div>\n\n              {/* Búsqueda por texto */}\n              <div className=\"filter-group\">\n                <input\n                  type=\"text\"\n                  className=\"form-input\"\n                  placeholder=\"🔍 Buscar por nombre, PLU, ID o observaciones...\"\n                  value={busquedaHistorial}\n                  onChange={(e) => setBusquedaHistorial(e.target.value)}\n                />\n              </div>\n\n              {/* Botones de filtro rápido */}\n              <div className=\"filter-buttons\">\n                <button \n                  className={`filter-btn ${filtroHistorial === 'todos' ? 'active' : ''}`}\n                  onClick={() => setFiltroHistorial('todos')}\n                >\n                  Todos ({statsHistorial.total})\n                </button>\n                <button \n                  className={`filter-btn ${filtroHistorial === 'activos' ? 'active' : ''}`}\n                  onClick={() => setFiltroHistorial('activos')}\n                >\n                  Activos ({statsHistorial.activos})\n                </button>\n                <button \n                  className={`filter-btn ${filtroHistorial === 'agotados' ? 'active' : ''}`}\n                  onClick={() => setFiltroHistorial('agotados')}\n                >\n                  Agotados ({statsHistorial.agotados})\n                </button>\n              </div>\n            </div>\n\n            {/* Lista del historial */}\n            <div className=\"historial-content\">\n              {historialFiltrado.length === 0 ? (\n                <div className=\"empty-state\">\n                  <h3>No se encontraron registros</h3>\n                  <p>Intenta ajustar los filtros de búsqueda</p>\n                </div>\n              ) : (\n                <div className=\"inventory-grid\">\n                  {historialFiltrado.map(unidad => renderUnidadCard(unidad, true))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Form */}\n      {showForm && (\n        <div className=\"card form-section\">\n          <h2>Registrar Nueva Unidad</h2>\n\n          <div className=\"form-grid\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">Código de Barras</label>\n              <input\n                type=\"text\"\n                className=\"form-input barcode-input\"\n                value={codigoBarras}\n                onChange={handleBarcodeChange}\n                placeholder=\"0000000000000\"\n                maxLength={13}\n              />\n              <div className=\"form-hint\">\n                Formato: 00 + PLU (5 dígitos) + Peso (5 dígitos) + 1 dígito\n              </div>\n            </div>\n\n            {productoSeleccionado && (\n              <>\n                <div className=\"form-group\">\n                  <label className=\"form-label\">Producto Detectado</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-input\"\n                    value={productoSeleccionado.nombre}\n                    disabled\n                  />\n                  <div className=\"form-hint\">\n                    Peso: {decodificarBarcode(codigoBarras)?.peso || 0}g\n                  </div>\n                </div>\n\n                <div className=\"form-group\">\n                  <label className=\"form-label\">Observaciones de Ingreso (opcional)</label>\n                  <textarea\n                    className=\"form-input\"\n                    value={observacionesIngreso}\n                    onChange={(e) => setObservacionesIngreso(e.target.value)}\n                    placeholder=\"Ej: Lote #123, Vencimiento: 15/03, etc.\"\n                    rows={3}\n                  />\n                </div>\n              </>\n            )}\n          </div>\n\n          <button\n            className=\"btn-submit\"\n            onClick={handleSubmit}\n            disabled={loading || !productoSeleccionado}\n          >\n            {loading ? 'Procesando...' : 'Registrar Unidad'}\n          </button>\n        </div>\n      )}\n\n      {/* Inventory */}\n          <div className=\"card\">\n            <h2>Inventario Actual</h2>\n            \n            <div className=\"form-group\" style={{ marginBottom: '1.5rem' }}>\n              <label className=\"form-label\">Buscar en inventario</label>\n              <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'flex-end' }}>\n                <input\n                  type=\"text\"\n                  className=\"form-input\"\n                  value={filtroInventario}\n                  onChange={(e) => setFiltroInventario(e.target.value)}\n                  placeholder=\"Buscar por nombre, PLU o ID...\"\n                  style={{ flex: 1 }}\n                />\n                <button\n                  className={`filter-btn ${busquedaObservaciones ? 'active' : ''}`}\n                  onClick={() => setBusquedaObservaciones(!busquedaObservaciones)}\n                  style={{ marginBottom: 0 }}\n                >\n                  🔍 Observaciones\n                </button>\n              </div>\n            </div>\n\n            {unidadesFiltradas.length === 0 ? (\n              <div className=\"empty-state\">\n                <h3>No se encontraron unidades</h3>\n                <p>Intenta ajustar los filtros de búsqueda</p>\n              </div>\n            ) : (\n              <div className=\"inventory-grid\">\n                {unidadesFiltradas.map(unidad => renderUnidadCard(unidad))}\n              </div>\n            )}\n          </div>\n\n        {showCutModal && unidadParaCortar && (\n          <div className=\"modal-overlay\" onClick={() => setShowCutModal(false)}>\n            <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n              <div className=\"modal-header\">\n                <h3 className=\"modal-title\">Realizar Corte</h3>\n                <button className=\"btn-close\" onClick={() => setShowCutModal(false)}>✕</button>\n              </div>\n\n              <div className=\"form-group\">\n                <label className=\"form-label\">Producto</label>\n                <input type=\"text\" className=\"form-input\" value={unidadParaCortar.producto.nombre} disabled />\n              </div>\n\n              <div className=\"form-group\">\n                <label className=\"form-label\">Peso Disponible</label>\n                <input type=\"text\" className=\"form-input\" value={`${unidadParaCortar.pesoActual}g`} disabled />\n              </div>\n\n              {/* Lector de código */}\n              <div className=\"form-group\">\n                <label className=\"form-label\">Escanear código de barras del queso después del corte</label>\n                <input\n                  type=\"text\"\n                  className=\"form-input barcode-input\"\n                  value={codigoBarrasCorte}\n                  onChange={handleBarcodeCorteChange}\n                  placeholder=\"0000000000000\"\n                  maxLength={13}\n                />\n                <div className=\"form-hint\">\n                  Escaneá el código del queso que quedó. Se calculará automáticamente cuánto se cortó.\n                </div>\n              </div>\n\n              {/* Mostrar peso calculado */}\n              {pesoCorte && (\n                <div className=\"form-group\">\n                  <label className=\"form-label\">Peso a cortar (calculado)</label>\n                  <input type=\"text\" className=\"form-input\" value={`${pesoCorte}g`} disabled />\n                </div>\n              )}\n\n              {unidadParaCortar.pesoActual > 0 && (\n                <div className=\"form-group\">\n                  <button\n                    className=\"btn-action btn-cut\"\n                      onClick={async () => {\n                        const pesoFinal = unidadParaCortar.pesoActual;\n                        setPesoCorte(pesoFinal.toString());\n                        setObservacionesCorte('Corte final – queso agotado');\n                        await handleCut();\n                      }}\n                  >\n                    🧀 Egresar todo ({unidadParaCortar.pesoActual}g)\n                  </button>\n                </div>\n              )}\n\n              {/* Observaciones opcionales */}\n              <div className=\"form-group\">\n                <label className=\"form-label\">Observaciones del corte (opcional)</label>\n                <textarea\n                  className=\"form-input\"\n                  value={observacionesCorte}\n                  onChange={(e) => setObservacionesCorte(e.target.value)}\n                  placeholder=\"Ej: Cliente: Juan Pérez, Pedido especial, etc.\"\n                  rows={3}\n                />\n              </div>\n\n              {/* Acciones */}\n              <div className=\"modal-actions\">\n                <button className=\"btn-cancel\" onClick={() => setShowCutModal(false)}>\n                  Cancelar\n                </button>\n                <button\n                  className=\"btn-confirm\"\n                  onClick={handleCut}\n                  disabled={loading || !pesoCorte}\n                >\n                  {loading ? 'Procesando...' : 'Confirmar Corte'}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n    </div>\n      \n    \n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}